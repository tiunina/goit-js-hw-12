{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["/*\n<li class=\"gallery-card\">\n  <img class=\"gallery-img\" src=\"\" alt=\"\" />\n</li>\n*/\n\nexport const createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n    <a class=\"gallery-a\" href=\"${imgInfo.largeImageURL}\">\n       <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"  />\n    </a>\n\n<ul class=\"img-description-list\">\n  <li class=\"img-description-el\">\n  <p>Likes</p>\n  <p>${imgInfo.likes}</p></li>\n  <li class=\"img-description-el\">\n  <p>Views</p>\n  <p>${imgInfo.views}</p></li>\n  <li class=\"img-description-el\">\n  <p>Comments</p>\n  <p>${imgInfo.comments}</p></li>\n  <li class=\"img-description-el\">\n  <p>Downloads</p>\n  <p>${imgInfo.downloads}</p></li>\n</ul>\n\n  </li>\n\n  \n`;\n};","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = (searchedQuery, page) => {\n  const axiosOptions = {\n    params: {\n      key: \"45491885-d594c4380fd68d18bb383d8af\",\n      q:searchedQuery,\n      image_type: 'photo',\n      orientation: \"horizontal\",\n      per_page: 15,\n      page: page,\n      safesearch: true,\n    },\n  };\n  return axios.get(``, axiosOptions);\n}\n\n\n//   const urlParams = new URLSearchParams({\n//     key: \"45491885-d594c4380fd68d18bb383d8af\",\n//     q:searchedQuery,\n//     image_type: 'photo',\n//     orientation: \"horizontal\",\n//     safesearch: true,\n//   });\n\n//   return fetch(`${BASE_URL}?${urlParams}`).then(response => {\n//     if (!response.ok){\n//       throw new Error(response.status);\n//     }\n//     return response.json()\n//   })\n// }","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nconst searchFormEl = document.querySelector(\".js-search-form\");\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector(\".load-more\");\nlet currentPage = 1;\nlet searchedValue = \"\";\nlet cardHeight = 0;\nconst loader = document.querySelector(\".loader\");\n\nconst onSearchFormSubmit = async event =>{\n  try {\n    event.preventDefault();\n    currentPage = 1;\n  \n  loader.classList.remove('is-hidden')\n  searchedValue = searchFormEl.elements.user_query.value;\n  if (!searchedValue.trim()){\n    return;  \n}\n\nconst response = await fetchPhotos(searchedValue, currentPage);\n    if (response.data.hits.length === 0){\n      iziToast.error({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: 'topRight',\n      });\n      loader.classList.add('is-hidden');\n      galleryEl.innerHTML = '';\n      return;\n    }\n    const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n    loader.classList.add('is-hidden');\n    galleryEl.innerHTML = galleryCardsTemplate;\n\n    const galleryCardEl = galleryEl.querySelector('li');\n    cardHeight = galleryCardEl.getBoundingClientRect().height;\n    \n    loadMoreBtn.classList.remove(\"is-hidden\");\n     new SimpleLightbox('.js-gallery a',{\n      captionsData: 'alt',\n      captionDelay: 250,\n    })\n    searchFormEl.reset();\n  } catch(err) {\n    console.log(err);\n  }\n}\n\nconst onLoadMore = async event =>{\ntry{\n  currentPage ++;\n  loader.classList.remove('is-hidden')\n  const response = await fetchPhotos(searchedValue, currentPage);\n  const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n  loader.classList.add('is-hidden');\n  galleryEl.insertAdjacentHTML(\"beforeend\", galleryCardsTemplate);\n\n  scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n\n  if (currentPage >= Math.ceil(response.data.totalHits / 15)) {\n    loadMoreBtn.classList.add('is-hidden');\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n\n} catch(err){\n  console.log(err);\n}\n}\n\nsearchFormEl.addEventListener(\"submit\", onSearchFormSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);"],"names":["createGalleryCardTemplate","imgInfo","axios","fetchPhotos","searchedQuery","page","axiosOptions","searchFormEl","galleryEl","loadMoreBtn","currentPage","searchedValue","cardHeight","loader","onSearchFormSubmit","event","response","iziToast","galleryCardsTemplate","imgDetails","SimpleLightbox","err","onLoadMore"],"mappings":"owBAMO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,iCAEwBA,EAAQ,aAAa;AAAA,uCACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAM1EA,EAAQ,KAAK;AAAA;AAAA;AAAA,OAGbA,EAAQ,KAAK;AAAA;AAAA;AAAA,OAGbA,EAAQ,QAAQ;AAAA;AAAA;AAAA,OAGhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECvBxBC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAc,CAACC,EAAeC,IAAS,CAClD,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAK,qCACL,EAAEF,EACF,WAAY,QACZ,YAAa,aACb,SAAU,GACV,KAAMC,EACN,WAAY,EACb,CACL,EACE,OAAOH,EAAM,IAAI,GAAII,CAAY,CACnC,ECNMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAc,EACdC,EAAgB,GAChBC,EAAa,EACjB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAqB,MAAMC,GAAQ,CACvC,GAAI,CAMJ,GALEA,EAAM,eAAc,EACpBL,EAAc,EAEhBG,EAAO,UAAU,OAAO,WAAW,EACnCF,EAAgBJ,EAAa,SAAS,WAAW,MAC7C,CAACI,EAAc,OACjB,OAGJ,MAAMK,EAAW,MAAMb,EAAYQ,EAAeD,CAAW,EACzD,GAAIM,EAAS,KAAK,KAAK,SAAW,EAAE,CAClCC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAClB,CAAO,EACDJ,EAAO,UAAU,IAAI,WAAW,EAChCL,EAAU,UAAY,GACtB,MACD,CACD,MAAMU,EAAuBF,EAAS,KAAK,KAAK,IAAIG,GAAcnB,EAA0BmB,CAAU,CAAC,EAAE,KAAK,EAAE,EAChHN,EAAO,UAAU,IAAI,WAAW,EAChCL,EAAU,UAAYU,EAGtBN,EADsBJ,EAAU,cAAc,IAAI,EACvB,sBAAuB,EAAC,OAEnDC,EAAY,UAAU,OAAO,WAAW,EACvC,IAAIW,EAAe,gBAAgB,CAClC,aAAc,MACd,aAAc,GACpB,CAAK,EACDb,EAAa,MAAK,CACnB,OAAOc,EAAK,CACX,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEMC,EAAa,MAAMP,GAAQ,CACjC,GAAG,CACDL,IACAG,EAAO,UAAU,OAAO,WAAW,EACnC,MAAMG,EAAW,MAAMb,EAAYQ,EAAeD,CAAW,EACvDQ,EAAuBF,EAAS,KAAK,KAAK,IAAIG,GAAcnB,EAA0BmB,CAAU,CAAC,EAAE,KAAK,EAAE,EAChHN,EAAO,UAAU,IAAI,WAAW,EAChCL,EAAU,mBAAmB,YAAaU,CAAoB,EAE9D,SAAS,CACP,IAAKN,EAAa,EAClB,SAAU,QACd,CAAG,EAEGF,GAAe,KAAK,KAAKM,EAAS,KAAK,UAAY,EAAE,IACvDP,EAAY,UAAU,IAAI,WAAW,EACrCQ,EAAS,MAAM,CACb,QAAS,6DACT,SAAU,UAChB,CAAK,EAGL,OAAQI,EAAI,CACV,QAAQ,IAAIA,CAAG,CACjB,CACA,EAEAd,EAAa,iBAAiB,SAAUO,CAAkB,EAC1DL,EAAY,iBAAiB,QAASa,CAAU"}